variable "openldap_config" {
  description = "all configuration in openldap"
  type = object({
    access_mode                     = string
    allowed_principal_ids           = list(string)
    servers                         = list(string)
    port                            = number
    binddn                          = string
    bindpw                          = string
    user_search_base                = string
    group_search_base               = string
    user_object_class               = string
    user_name_attribute             = string
    user_login_attribute            = string
    user_member_attribute           = string
    user_search_attribute           = string
    user_search_filter              = string
    user_enabled_attribute          = string
    group_object_class              = string
    group_name_attribute            = string
    group_member_user_attribute     = string
    group_search_attribute          = string
    group_search_filter             = string
    group_member_mapping_attribute  = string
    group_dn_attribute              = string
    nested_group_membership_enabled = bool
    test_username                   = string
    test_password                   = string
  })
  default = {
    access_mode                     = "unrestricted"
    allowed_principal_ids           = [""]
    servers                         = []
    port                            = 389
    binddn                          = ""
    bindpw                          = ""
    user_search_base                = ""
    group_search_base               = ""
    user_object_class               = "inetOrgPerson"
    user_name_attribute             = "cn"
    user_login_attribute            = "cn"
    user_member_attribute           = "memberOf"
    user_search_attribute           = "uid|sn|givenName"
    user_search_filter              = ""
    user_enabled_attribute          = ""
    group_object_class              = "groupOfNames"
    group_name_attribute            = "cn"
    group_member_user_attribute     = "entryDN"
    group_search_attribute          = "cn"
    group_search_filter             = ""
    group_member_mapping_attribute  = "member"
    group_dn_attribute              = "entryDN"
    nested_group_membership_enabled = false
    test_username                   = ""
    test_password                   = ""
  }
  sensitive = true
}